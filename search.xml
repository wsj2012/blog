<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>iOSçº¿ç¨‹é”</title>
      <link href="/blog/article/iOS%E7%BA%BF%E7%A8%8B%E9%94%81/"/>
      <url>/blog/article/iOS%E7%BA%BF%E7%A8%8B%E9%94%81/</url>
      
        <content type="html"><![CDATA[<h1 id="iOSçº¿ç¨‹é”"><a href="#iOSçº¿ç¨‹é”" class="headerlink" title="iOSçº¿ç¨‹é”"></a>iOSçº¿ç¨‹é”</h1><p>åŸºæœ¬æ¦‚å¿µï¼šä¸ºäº†ä¿è¯å…±äº«æ•°æ®æ“ä½œçš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§è€Œæå‡ºçš„ä¸€ç§æœºåˆ¶ã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ï¼Ÿ</h2><p>ä¸ºä¸€ä¸ªå±æ€§ä¿®é¥°ä¸ºnonatomicçš„stringå¯¹è±¡èµ‹å€¼ï¼Œ åœ¨å¹¶å‘é˜Ÿåˆ—ä¸­æ·»åŠ å¼‚æ­¥ä»»åŠ¡è¿›è¡Œèµ‹å€¼ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @property (nonatomic, copy) NSString *target;</span></span><br><span class="line">- (<span class="keyword">void</span>)lockTest &#123;</span><br><span class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_queue_create(<span class="literal">NULL</span>, DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSInteger</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      <span class="built_in">dispatch_async</span>(queue, ^&#123;</span><br><span class="line">        <span class="keyword">self</span>.target = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"target--%ld"</span>, i];</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå°†ä¼šå‡ºç°EXC_BAD_ACCESSdçš„crashé—®é¢˜ã€‚</p><p>å…ˆçœ‹çœ‹ä¸ºtargetèµ‹å€¼æ“ä½œçš„setå†…éƒ¨æ–¹å¼å®ç°ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)setTarget:(<span class="built_in">NSString</span> *)target &#123;</span><br><span class="line"><span class="keyword">if</span> (_target != target) &#123;</span><br><span class="line">[_target release];</span><br><span class="line">[_target <span class="keyword">retain</span>];</span><br><span class="line">_target = target;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œæœ‰äº›çº¿ç¨‹åœ¨æ‰§è¡Œåˆ°<code>[_target release]</code>çš„æ—¶å€™ï¼Œå¯¹è±¡å·²ç»è¢«é‡Šæ”¾æ‰ã€‚åŒæ—¶å¦å¤–å…¶ä»–æŸäº›çº¿ç¨‹ä¹Ÿæ‰§è¡Œ<code>[_target release]</code>çš„æ—¶å€™ï¼Œ å°±ä¼šæƒ³ä¸€ä¸ªå·²ç»é‡Šæ”¾çš„å¯¹è±¡å‘é€æ¶ˆæ¯ä»è€Œé€ æˆcrashã€‚</p><p>é’ˆå¯¹ä»¥ä¸Šé—®é¢˜ï¼Œæå‡ºäº†ğŸ”çš„æœºåˆ¶ã€‚åœ¨æŸä¸€çº¿ç¨‹æ‰§è¡Œèµ‹å€¼æ“ä½œæ—¶ï¼Œå…ˆåŠ é”ï¼Œèµ‹å€¼ç»“æŸåå†è§£é”ã€‚å…¶ä»–çº¿ç¨‹æ— æ³•è®¿é—®å·²ç»åŠ é”äº†çš„èµ„æºã€‚</p><p>iOSæä¾›äº†ä¸€ä¸‹10ä¸­ğŸ”ï¼š</p><h4 id="1ã€OSSpinLock-è‡ªæ—‹é”"><a href="#1ã€OSSpinLock-è‡ªæ—‹é”" class="headerlink" title="1ã€OSSpinLock(è‡ªæ—‹é”)"></a>1ã€OSSpinLock(è‡ªæ—‹é”)</h4><p>å’Œäº’æ–¥é”ç±»ä¼¼ï¼Œä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p><p>äº’æ–¥é”ï¼šå½“ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°è¿™ä¸ªé”åï¼Œå…¶ä»–æƒ³è¦è·å–æ­¤é”çš„çº¿ç¨‹å°†ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°è¯¥é”è¢«é‡Šæ”¾ã€‚</p><p>è‡ªæ—‹é”ï¼šå½“ä¸€ä¸ªçº¿ç¨‹è·å¾—é”ä¹‹åï¼Œå…¶ä»–çº¿ç¨‹å°†ä¼šä¸€ç›´å¾ªç¯åœ¨é‚£é‡ŒæŸ¥çœ‹æ”¹é”æ˜¯å¦è¢«é‡Šæ”¾ã€‚åŸç†å°±æ˜¯ä¸€ä¸ªdo whileå¾ªç¯ã€‚ç¼ºç‚¹æ˜¯å¾ˆæ¶ˆè€—cpuèµ„æºï¼Œæ‰€ä»¥ä¸é€‚ç”¨äºè¾ƒé•¿æ—¶é—´çš„ä»»åŠ¡ï¼Œæ‰€ä»¥æ­¤é”è¾ƒé€‚ç”¨äºæŒæœ‰è€…ä¿å­˜æ—¶é—´è¾ƒçŸ­çš„æƒ…å†µä¸‹ã€‚æ­£æ˜¯ç”±äºæ­¤é”ä¿æŒæ—¶é—´éå¸¸çŸ­ï¼Œå› ä¸ºé€‰æ‹©è‡ªæ—‹é”è€Œä¸æ˜¯ç¡çœ æ˜¯éå¸¸å¿…è¦çš„ï¼Œè‡ªæ—‹é”æ•ˆç‡è¿œé«˜äºäº’æ–¥é”ã€‚</p><h4 id="2ã€os-unfair-lock"><a href="#2ã€os-unfair-lock" class="headerlink" title="2ã€os_unfair_lock"></a>2ã€os_unfair_lock</h4><p>è‡ªæ—‹é”ï¼Œè‹¹æœåœ¨iOS10.0ä»¥åç”¨æ¥æ›¿ä»£OSSpinLockï¼Œéœ€è¦å¯¼å…¥å¤´æ–‡ä»¶<code>#import &lt;os/lock.h&gt;</code></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">os_unfair_lock unfair_lock = OS_UNFAIR_LOCK_INIT</span><br><span class="line"><span class="comment">// åŠ é”</span></span><br><span class="line">os_unfair_lock_lock(&amp;unfair_lock)</span><br><span class="line"> <span class="comment">// è§£é”</span></span><br><span class="line">os_unfair_lock_unlock(&amp;unfair_lock) </span><br><span class="line"> <span class="comment">// å°è¯•åŠ é”</span></span><br><span class="line">os_unfair_lock_trylock(&amp;unfair_lock)</span><br></pre></td></tr></table></figure><h4 id="3ã€dispatch-semaphore-ä¿¡å·é‡"><a href="#3ã€dispatch-semaphore-ä¿¡å·é‡" class="headerlink" title="3ã€dispatch_semaphore(ä¿¡å·é‡)"></a>3ã€dispatch_semaphore(ä¿¡å·é‡)</h4><p>GCDé‡Œé¢çš„ä¿¡å·é‡ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡é™åˆ¶å¹¶å‘çº¿ç¨‹çš„æ¡æ•°æ¥æ§åˆ¶çº¿ç¨‹å®‰å…¨çš„ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–   long value ï¼šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„æ•°é‡</span></span><br><span class="line">dispatch_semaphore_t semaphore_t = dispatch_semaphore_create(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// åŠ é”</span></span><br><span class="line">dispatch_semaphore_wait(semaphore_t,DISPATCH_TIME_FOREVER);</span><br><span class="line"><span class="comment">// è§£é”</span></span><br><span class="line">dispatch_semaphore_signal(semaphore_t);</span><br></pre></td></tr></table></figure><h4 id="4ã€pthread-mutex-äº’æ–¥é”"><a href="#4ã€pthread-mutex-äº’æ–¥é”" class="headerlink" title="4ã€pthread_mutex(äº’æ–¥é”)"></a>4ã€pthread_mutex(äº’æ–¥é”)</h4><p>å½“ä¸€ä¸ªçº¿ç¨‹è·å¾—é”ä¹‹åï¼Œå…¶ä»–æƒ³è¦è·å¾—æ­¤é”çš„çº¿ç¨‹å°†ä¼šè¢«é˜»å¡ï¼ŒçŸ¥é“åˆ°è¯¥é”è¢«é‡Šæ”¾ã€‚</p><p>ä½¿ç”¨éœ€å¼•å…¥å¤´æ–‡ä»¶<code>#import &lt;pthread/pthread.h</code></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  åˆå§‹åŒ– ,æä¾›ä¸¤ç§æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ç§</span></span><br><span class="line">pthread_mutex_t mutex_t;</span><br><span class="line">pthread_mutex_init(&amp;mutex_t, <span class="literal">NULL</span>); </span><br><span class="line"><span class="comment">// ç¬¬äºŒç§ï¼Œå®åˆå§‹åŒ–</span></span><br><span class="line">pthread_mutex_t mutex =PTHREAD_MUTEX_INITIALIZER;</span><br><span class="line"><span class="comment">// åŠ é”</span></span><br><span class="line">pthread_mutex_lock(&amp;mutex_t);</span><br><span class="line"><span class="comment">// è§£é”</span></span><br><span class="line">pthread_mutex_unlock(&amp;mutex_t);</span><br><span class="line"><span class="comment">// å°è¯•åŠ é”ï¼Œè¿™é‡Œå’Œä¸Šé¢ä¸åŒçš„æ˜¯ï¼šå½“å¯ä»¥åŠ é”è¿”å›çš„æ˜¯ 0ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªé”™è¯¯</span></span><br><span class="line">pthread_mutex_trylock(&amp; mutex_t)</span><br></pre></td></tr></table></figure><h4 id="5ã€NSLock-äº’æ–¥é”ã€å¯¹è±¡é”"><a href="#5ã€NSLock-äº’æ–¥é”ã€å¯¹è±¡é”" class="headerlink" title="5ã€NSLock(äº’æ–¥é”ã€å¯¹è±¡é”)"></a>5ã€NSLock(äº’æ–¥é”ã€å¯¹è±¡é”)</h4><p>æ­¤ç§é”ä½¿ç”¨è¾ƒå¤šã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">NSLock</span> *lock = [[<span class="built_in">NSLock</span> alloc]init];</span><br><span class="line"><span class="comment">// åŠ é”</span></span><br><span class="line">[lock lock];</span><br><span class="line"><span class="comment">// è§£é”</span></span><br><span class="line">[lock unlock];</span><br><span class="line"><span class="comment">// å°è¯•åŠ é”ï¼Œå¯ä»¥åŠ é”åˆ™ç«‹å³åŠ é”å¹¶è¿”å› YES,åä¹‹è¿”å› NO</span></span><br><span class="line">[lock tryLock];</span><br></pre></td></tr></table></figure><h4 id="6ã€NSCondition-æ¡ä»¶é”ã€å¯¹è±¡é”"><a href="#6ã€NSCondition-æ¡ä»¶é”ã€å¯¹è±¡é”" class="headerlink" title="6ã€NSCondition(æ¡ä»¶é”ã€å¯¹è±¡é”)"></a>6ã€NSCondition(æ¡ä»¶é”ã€å¯¹è±¡é”)</h4><p>äº’æ–¥é”å’Œæ¡ä»¶é”çš„ç»“åˆä½“ã€‚</p><p>NSConditionçš„å¯¹è±¡å®é™…å……å½“çº¿ç¨‹ä¸­çš„é”å’Œæ£€æŸ¥å™¨ã€‚é”ä¸»è¦ä¸ºäº†å½“æ£€æµ‹æ¡ä»¶æ—¶ä¿æŠ¤æ•°æ®æºï¼›çº¿ç¨‹æ£€æŸ¥å™¨ä¸»è¦æ˜¯æ ¹æ®æ¡ä»¶å†³å®šæ˜¯å¦ç»§ç»­è¿è¡Œçº¿ç¨‹ï¼Œå³çº¿ç¨‹æ˜¯å¦è¢«é˜»å¡ã€‚æ‰§è¡Œæ¡ä»¶å¼•å‘çš„ä»»åŠ¡å½“æ¡ä»¶ä¸æˆç«‹æ—¶ï¼Œçº¿ç¨‹ä¼šé˜»å¡ã€‚åœ¨å¦ä¸€ä¸ªçº¿ç¨‹å‘æ¡ä»¶å¯¹è±¡å‘å‡ºä¿¡å·ä¹‹å‰ï¼Œå®ƒä¸€ç›´ä¿æŒé˜»å¡çŠ¶æ€ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// // åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">NSCondition</span> *condition= [[<span class="built_in">NSCondition</span> alloc]init];</span><br><span class="line"><span class="comment">// åŠ é”</span></span><br><span class="line">[condition lock];</span><br><span class="line"><span class="comment">// è§£é”</span></span><br><span class="line">[condition unlock];</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å…¶ä»–åŠŸèƒ½</span></span><br><span class="line"><span class="comment">wait è¿›å…¥ç­‰å¾…çŠ¶æ€</span></span><br><span class="line"><span class="comment">waitUntilDate:è®©ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…ä¸€å®šçš„æ—¶é—´</span></span><br><span class="line"><span class="comment">signal å”¤é†’ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹</span></span><br><span class="line"><span class="comment">broadcast å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹</span></span><br></pre></td></tr></table></figure><h4 id="7ã€NSConditionLock-æ¡ä»¶é”ã€å¯¹è±¡é”"><a href="#7ã€NSConditionLock-æ¡ä»¶é”ã€å¯¹è±¡é”" class="headerlink" title="7ã€NSConditionLock(æ¡ä»¶é”ã€å¯¹è±¡é”)"></a>7ã€NSConditionLock(æ¡ä»¶é”ã€å¯¹è±¡é”)</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">NSConditionLock</span> *_conditionLock = [[<span class="built_in">NSConditionLock</span> alloc]init];</span><br><span class="line"><span class="comment">// åŠ é”</span></span><br><span class="line">[_conditionLock lock];</span><br><span class="line"><span class="comment">// è§£é”</span></span><br><span class="line">[_conditionLock unlock];</span><br><span class="line"><span class="comment">// å°è¯•åŠ é”ï¼Œå¯ä»¥åŠ é”åˆ™ç«‹å³åŠ é”å¹¶è¿”å› YES,åä¹‹è¿”å› NO</span></span><br><span class="line">[_conditionLock tryLock];</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å…¶ä»–åŠŸèƒ½æ¥å£</span></span><br><span class="line"><span class="comment">- (instancetype)initWithCondition:(NSInteger)condition NS_DESIGNATED_INITIALIZER; //åˆå§‹åŒ–ä¼ å…¥æ¡ä»¶</span></span><br><span class="line"><span class="comment">- (void)lockWhenCondition:(NSInteger)condition;//æ¡ä»¶æˆç«‹è§¦å‘é”</span></span><br><span class="line"><span class="comment">- (BOOL)tryLockWhenCondition:(NSInteger)condition;//å°è¯•æ¡ä»¶æˆç«‹è§¦å‘é”</span></span><br><span class="line"><span class="comment">- (void)unlockWithCondition:(NSInteger)condition;//æ¡ä»¶æˆç«‹è§£é”</span></span><br><span class="line"><span class="comment">- (BOOL)lockBeforeDate:(NSDate *)limit;//è§¦å‘é” åœ¨ç­‰å¾…æ—¶é—´ä¹‹å†…</span></span><br><span class="line"><span class="comment">- (BOOL)lockWhenCondition:(NSInteger)condition beforeDate:(NSDate *)limit;//è§¦å‘é” æ¡ä»¶æˆç«‹ å¹¶ä¸”åœ¨ç­‰å¾…æ—¶é—´ä¹‹å†…</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="8ã€NSRecursiveLock-é€’å½’é”ã€å¯¹è±¡é”"><a href="#8ã€NSRecursiveLock-é€’å½’é”ã€å¯¹è±¡é”" class="headerlink" title="8ã€NSRecursiveLock(é€’å½’é”ã€å¯¹è±¡é”)"></a>8ã€NSRecursiveLock(é€’å½’é”ã€å¯¹è±¡é”)</h4><p>å¯ä»¥è¢«åŒä¸€çº¿ç¨‹å¤šæ¬¡è¯·æ±‚ï¼Œè€Œä¸ä¼šå¼•èµ·æ­»é”ã€‚åŒæ ·åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¯¥å¯¹è±¡ï¼Œä½†å…è®¸åŒä¸€ä¸ªçº¿ç¨‹åœ¨æœªè¢«é‡Šæ”¾å…¶æ‹¥æœ‰çš„é”æ—¶å¯åå¤å¯¹è¯¥é”è¿›è¡ŒåŠ é”æ“ä½œã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">NSRecursiveLock</span> *_recursiveLock = [[<span class="built_in">NSRecursiveLock</span> alloc]init];</span><br><span class="line"><span class="comment">// åŠ é”</span></span><br><span class="line">[_recursiveLock lock];</span><br><span class="line"><span class="comment">// è§£é”</span></span><br><span class="line">[_recursiveLock unlock];</span><br><span class="line"><span class="comment">// å°è¯•åŠ é”ï¼Œå¯ä»¥åŠ é”åˆ™ç«‹å³åŠ é”å¹¶è¿”å› YES,åä¹‹è¿”å› NO</span></span><br><span class="line">[_recursiveLock tryLock];</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ³¨: é€’å½’é”å¯ä»¥è¢«åŒä¸€çº¿ç¨‹å¤šæ¬¡è¯·æ±‚ï¼Œè€Œä¸ä¼šå¼•èµ·æ­»é”ã€‚</span></span><br><span class="line"><span class="comment">å³åœ¨åŒä¸€çº¿ç¨‹ä¸­åœ¨æœªè§£é”ä¹‹å‰è¿˜å¯ä»¥ä¸Šé”, æ‰§è¡Œé”ä¸­çš„ä»£ç ã€‚</span></span><br><span class="line"><span class="comment">è¿™ä¸»è¦æ˜¯ç”¨åœ¨å¾ªç¯æˆ–é€’å½’æ“ä½œä¸­ã€‚</span></span><br><span class="line"><span class="comment">- (BOOL)lockBeforeDate:(NSDate *)limit;//è§¦å‘é” åœ¨ç­‰å¾…æ—¶é—´ä¹‹å†…</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="9ã€pthread-mutex-recursive-é€’å½’é”"><a href="#9ã€pthread-mutex-recursive-é€’å½’é”" class="headerlink" title="9ã€pthread_mutex(recursive)(é€’å½’é”)"></a>9ã€pthread_mutex(recursive)(é€’å½’é”)</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">pthread_mutex_t mutex_t;</span><br><span class="line">pthread_mutexattr_t attr;</span><br><span class="line">pthread_mutexattr_init(&amp;attr); <span class="comment">//åˆå§‹åŒ–attrå¹¶ä¸”ç»™å®ƒèµ‹äºˆé»˜è®¤pthread_mutexattr_settype(&amp;attr, PTHREAD_MUTEX_RECURSIVE); //è®¾ç½®é”ç±»å‹ï¼Œè¿™è¾¹æ˜¯è®¾ç½®ä¸ºé€’å½’é”</span></span><br><span class="line">pthread_mutex_init(&amp;mutex_t, &amp;attr);</span><br><span class="line">pthread_mutexattr_destroy(&amp;attr); <span class="comment">//é”€æ¯ä¸€ä¸ªå±æ€§å¯¹è±¡ï¼Œåœ¨é‡æ–°è¿›è¡Œåˆå§‹åŒ–ä¹‹å‰è¯¥ç»“æ„ä¸èƒ½é‡æ–°ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// åŠ é”</span></span><br><span class="line">pthread_mutex_lock(&amp;mutex_t);</span><br><span class="line"><span class="comment">// è§£é”</span></span><br><span class="line">pthread_mutex_unlock(&amp;mutex_t);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ³¨: é€’å½’é”å¯ä»¥è¢«åŒä¸€çº¿ç¨‹å¤šæ¬¡è¯·æ±‚ï¼Œè€Œä¸ä¼šå¼•èµ·æ­»é”ã€‚</span></span><br><span class="line"><span class="comment">å³åœ¨åŒä¸€çº¿ç¨‹ä¸­åœ¨æœªè§£é”ä¹‹å‰è¿˜å¯ä»¥ä¸Šé”, æ‰§è¡Œé”ä¸­çš„ä»£ç ã€‚</span></span><br><span class="line"><span class="comment">è¿™ä¸»è¦æ˜¯ç”¨åœ¨å¾ªç¯æˆ–é€’å½’æ“ä½œä¸­ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="10ã€-synchronized-æ¡ä»¶é”"><a href="#10ã€-synchronized-æ¡ä»¶é”" class="headerlink" title="10ã€@synchronized(æ¡ä»¶é”)"></a>10ã€@synchronized(æ¡ä»¶é”)</h4><p>ç›¸æ¯”äºä½¿ç”¨ å…¶ä»–æ–¹å¼ä¾‹å¦‚NSLock åˆ›å»ºé”å¯¹è±¡ã€åŠ é”å’Œè§£é”æ¥è¯´ï¼Œ@synchronized ç”¨ç€æ›´æ–¹ä¾¿ï¼Œå¯è¯»æ€§æ›´é«˜ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        begin = <span class="built_in">CACurrentMediaTime</span>();</span><br><span class="line">        <span class="built_in">NSObject</span> *lock = [<span class="built_in">NSObject</span> new];</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">NSInteger</span> i = <span class="number">0</span>;i &lt; count; i++)&#123;</span><br><span class="line">            dispatch_group_async(group, queue, ^&#123;</span><br><span class="line">                <span class="keyword">@synchronized</span> (lock) &#123;</span><br><span class="line">                    <span class="keyword">self</span>.target = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"target--%ld"</span>,i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        dispatch_group_notify(group, queue, ^&#123;</span><br><span class="line">            end = <span class="built_in">CACurrentMediaTime</span>();</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"@synchronized:           %8.2f ms"</span>,(end - begin) * <span class="number">1000</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> çº¿ç¨‹é” </tag>
            
            <tag> åŠ é” </tag>
            
            <tag> å®‰å…¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reactç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/blog/article/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
      <url>/blog/article/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å·¥ä½œä¸­ä½¿ç”¨åˆ°react.jsè¿›è¡Œå‰ç«¯é¡µé¢å¼€å‘ï¼Œæ€»æ˜¯å¿˜è®°reactç”Ÿå‘½å‘¨æœŸå‡½æ•°åœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Œè°ƒç”¨æ—¶é—´èŠ‚ç‚¹ç­‰é—®é¢˜ã€‚æ•…Markä¸€ä¸‹ï¼Œä»¥ä¾¿åœ¨æœªæ¥codingçš„æ—¶å€™å¿˜è®°äº†èƒ½å›æ¥reviewã€‚å¤šçœ‹å‡ éç›¸ä¿¡å°±ä¸€å®šä¼šè®°ä½ã€‚ğŸ’ª</p><ul><li><p>åˆå§‹åŒ–é˜¶æ®µï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// è·å–å®ä¾‹çš„é»˜è®¤å±æ€§</span><br><span class="line">getDefaultProps:</span><br><span class="line"></span><br><span class="line">// è®¾ç½®å±æ€§çš„ç±»å‹</span><br><span class="line">static propTypes </span><br><span class="line"></span><br><span class="line">// ç»„ä»¶å³å°†é¦–æ¬¡è¢«è£…è½½ã€æ¸²æŸ“åˆ°é¡µé¢ä¸Š</span><br><span class="line">componentWillMountï¼š</span><br><span class="line"></span><br><span class="line">// ç»„ä»¶åœ¨è¿™é‡Œç”Ÿæˆè™šæ‹Ÿçš„ DOM èŠ‚ç‚¹</span><br><span class="line">render:</span><br><span class="line"></span><br><span class="line">// ç»„ä»¶çœŸæ­£åœ¨è¢«é¦–æ¬¡è£…è½½ä¹‹å</span><br><span class="line">componentDidMount:</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>è¿è¡Œä¸­çŠ¶æ€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// åœ¨æ•°æ®æ›´æ–°é¡µé¢éœ€è¦é‡æ–°æ¸²æŸ“çš„æ—¶å€™ï¼Œç»„ä»¶å°†è¦æ¥æ”¶åˆ°å±æ€§çš„æ—¶å€™è°ƒç”¨ï¼Œ</span><br><span class="line">componentWillReceiveProps:</span><br><span class="line"></span><br><span class="line">// ç»„ä»¶æ¥å—åˆ°æ–°å±æ€§æˆ–è€…æ–°çŠ¶æ€çš„æ—¶å€™ï¼ˆå¯ä»¥è¿”å› falseï¼Œæ¥æ”¶æ•°æ®åä¸æ›´æ–°ï¼Œé˜»æ­¢renderè°ƒç”¨ï¼Œåé¢çš„å‡½æ•°ä¸ä¼šè¢«ç»§ç»­æ‰§è¡Œäº†ï¼‰ </span><br><span class="line">shouldComponentUpdate:</span><br><span class="line"></span><br><span class="line">// ç»„ä»¶å³å°†æ›´æ–°ä¸èƒ½ä¿®æ”¹å±æ€§å’ŒçŠ¶æ€</span><br><span class="line">componentWillUpdate:</span><br><span class="line"></span><br><span class="line">// ç»„ä»¶é‡æ–°æç»˜</span><br><span class="line">render:</span><br><span class="line"></span><br><span class="line">// ç»„ä»¶å·²ç»æ›´æ–°</span><br><span class="line">componentDidUpdate:</span><br></pre></td></tr></table></figure></li><li><p>é”€æ¯é˜¶æ®µï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// ç»„ä»¶å³å°†é”€æ¯</span><br><span class="line">componentWillUnmount:</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> react </tag>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> h5 </tag>
            
            <tag> ç”Ÿå‘½å‘¨æœŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Appå¯åŠ¨é€Ÿåº¦ç¯‡</title>
      <link href="/blog/article/App%E5%90%AF%E5%8A%A8%E9%80%9F%E5%BA%A6%E7%AF%87/"/>
      <url>/blog/article/App%E5%90%AF%E5%8A%A8%E9%80%9F%E5%BA%A6%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€Appå¯åŠ¨éƒ½åšäº†å“ªäº›äº‹å„¿ï¼Ÿ"><a href="#1ã€Appå¯åŠ¨éƒ½åšäº†å“ªäº›äº‹å„¿ï¼Ÿ" class="headerlink" title="1ã€Appå¯åŠ¨éƒ½åšäº†å“ªäº›äº‹å„¿ï¼Ÿ"></a>1ã€Appå¯åŠ¨éƒ½åšäº†å“ªäº›äº‹å„¿ï¼Ÿ</h3><ul><li>å†·å¯åŠ¨(å¯åŠ¨å‰Appè¿›ç¨‹ä¸åœ¨ç³»ç»Ÿé‡Œï¼Œéœ€è¦ç³»ç»Ÿæ–°åˆ›å»ºä¸€ä¸ªè¿›ç¨‹åˆ†é…ç»™å®ƒï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œæˆçš„å¯åŠ¨è¿‡ç¨‹)</li><li>çƒ­å¯åŠ¨(Appè¿›ç¨‹åœ¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·é‡æ–°å¯åŠ¨è¿›å…¥Appçš„è¿‡ç¨‹)</li></ul><blockquote><p>ç”¨æˆ·æ„ŸçŸ¥åˆ°å¯åŠ¨æ…¢ï¼Œå…¶å®éƒ½å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ä¸Šï¼Œè€Œä¸»çº¿ç¨‹æ…¢çš„åŸå› å¾ˆå¤šï¼Œå¦‚åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œäº†å¤§æ–‡ä»¶çš„è¯»å†™æ“ä½œã€åœ¨æ¸²æŸ“å‘¨æœŸä¸­æ‰§è¡Œäº†å¤§é‡è®¡ç®—ç­‰ã€‚ã€‚ã€‚</p></blockquote><h3 id="2ã€å¯åŠ¨é˜¶æ®µ"><a href="#2ã€å¯åŠ¨é˜¶æ®µ" class="headerlink" title="2ã€å¯åŠ¨é˜¶æ®µ"></a>2ã€å¯åŠ¨é˜¶æ®µ</h3><ul><li><p>main()å‡½æ•°æ‰§è¡Œå‰ï¼›</p><p>ä¼˜åŒ–ï¼š</p><p>1ï¸âƒ£ã€å‡å°‘åŠ¨æ€åº“åŠ è½½ï¼›</p><p>2ï¸âƒ£ã€å‡å°‘åŠ è½½å¯åŠ¨åä¸ä¼šå»ä½¿ç”¨çš„ç±»æˆ–è€…æ–¹æ³•ï¼›</p><p>3ï¸âƒ£ã€+loadn()æ–¹æ³•é‡Œçš„å†…å®¹å¯ä»¥æ”¾åˆ°é¦–å±æ¸²æŸ“å®Œæˆåå†æ‰§è¡Œï¼Œæˆ–è€…ä½¿ç”¨+initialize()æ–¹æ³•æ›¿æ¢æ‰</p><p>æ³¨ï¼šåœ¨ä¸€ä¸ª+load()æ–¹æ³•é‡Œï¼Œè¿›è¡Œè¿è¡Œæ—¶æ›¿æ¢æ“ä½œå¸¦æ¥4msçš„æ¶ˆè€—ï¼Œæ–‡ä»¶è¶Šå¤šï¼Œå¯¹å¯åŠ¨é€Ÿåº¦çš„å½±å“å°±è¶Šå¤§ã€‚</p></li><li><p>main()å‡½æ•°æ‰§è¡Œåï¼›</p></li></ul><ul><li>é¦–å±æ¸²æŸ“å®Œæˆåã€‚</li></ul><h3 id="3ã€å¯åŠ¨ä¼˜åŒ–"><a href="#3ã€å¯åŠ¨ä¼˜åŒ–" class="headerlink" title="3ã€å¯åŠ¨ä¼˜åŒ–"></a>3ã€å¯åŠ¨ä¼˜åŒ–</h3><ul><li><p>åŠŸèƒ½çº§åˆ«çš„å¯åŠ¨ä¼˜åŒ–ï¼ˆmain()å‡½æ•°æ‰§è¡Œåé˜¶æ®µï¼‰</p><p>æ€è·¯ï¼šmain()å‡½æ•°æ‰§è¡Œååˆ°é¦–å±æ¸²æŸ“å®Œæˆåªå¤„ç†é¦–å±ç›¸å…³çš„ä¸šåŠ¡ï¼Œå…¶ä»–éé¦–å±ä¸šåŠ¡çš„åˆå§‹åŒ–ã€ç›‘å¬ã€é…ç½®æ–‡ä»¶è¯»å–ç­‰éƒ½æ”¾åˆ°é¦–å±æ¸²æŸ“å®Œæˆåå»åšã€‚</p></li><li><p>æ–¹æ³•çº§åˆ«çš„å¯åŠ¨ä¼˜åŒ–</p><p>æ€è·¯ï¼šæ£€æŸ¥é¦–å±æ¸²æŸ“å®Œæˆå‰æœ‰å“ªäº›è€—æ—¶çš„æ–¹æ³•ã€å°†æ²¡å¿…è¦çš„è€—æ—¶æ–¹æ³•æ»åæˆ–å¼‚æ­¥æ‰§è¡Œ(é‡ç‚¹æ£€æŸ¥æ‰§è¡Œå®ç°åŠ è½½ã€ç¼–è¾‘ã€å­˜å‚¨å›¾ç‰‡å’Œæ–‡ä»¶ç­‰èµ„æºçš„æ–¹æ³•)</p></li></ul><h3 id="4ã€ç›‘æ§æ‰‹æ®µ"><a href="#4ã€ç›‘æ§æ‰‹æ®µ" class="headerlink" title="4ã€ç›‘æ§æ‰‹æ®µ"></a>4ã€ç›‘æ§æ‰‹æ®µ</h3><ul><li><p>å®šæ—¶æŠ“å–ä¸»çº¿ç¨‹ä¸Šçš„æ–¹æ³•è°ƒç”¨å †æ ˆï¼Œè®¡ç®—ä¸€æ®µæ—¶é—´é‡Œå„ä¸ªæ–¹æ³•çš„è€—æ—¶(Time  Profiler)</p></li><li><p>å¯¹obj_msgSendæ–¹æ³•è¿›è¡Œhookæ¥æŒæ¡æ‰€æœ‰æ–¹æ³•çš„è€—æ—¶ã€‚(fishhook)</p><p>æ³¨ï¼šFaceBookå¼€æºåº“<a href="https://github.com/facebook/fishhook" target="_blank" rel="noopener">fishhook</a>ï¼Œå¯åœ¨iOSä¸Šè¿è¡Œçš„Mach-OäºŒè¿›åˆ¶æ–‡ä»¶ä¸­åŠ¨æ€åœ°é‡æ–°ç»‘å®šç¬¦å·ã€‚</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> å¯åŠ¨ </tag>
            
            <tag> é€Ÿåº¦ </tag>
            
            <tag> App </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter çº¯iOSé£æ ¼UIæ¡†æ¶æ­å»º</title>
      <link href="/blog/article/Flutter%20iOS%E9%A3%8E%E6%A0%BCUI%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA/"/>
      <url>/blog/article/Flutter%20iOS%E9%A3%8E%E6%A0%BCUI%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<p>æ–°å…¥é—¨FlutteræŠ€æœ¯æ ˆï¼Œä»iOSè½¬å…¥ï¼Œæ•…å®ç°ä¸€å¥—å…¨iOSé£æ ¼çš„Flutteré¡µé¢æ­å»ºã€‚å…¶ä¸­é€šè¿‡æŸ¥è¯¢å®˜æ–¹èµ„æ–™(ç°åœ¨ç”Ÿæ€ä¸å¤Ÿå¥å…¨ï¼Œèµ„æ–™å¾ˆéš¾å¯»æ‰¾)ï¼ŒèŠ±äº†ç‚¹åŠŸå¤«æœ€ç»ˆå¾—ä»¥å®ç°ã€‚æœ‰å®ç°æ›´å¥½çš„æ–¹å¼è¿˜æœ›ä¸åèµæ•™ï¼Œæœ‰ä½¿ç”¨ä¸å¯¹çš„åœ°æ–¹è¿˜è¯·æŒ‡æ­£ã€‚é¡¹ç›®åœ°å€<a href="https://github.com/wsj2012/Flutter-iOS" target="_blank" rel="noopener">ä¼ é€é—¨</a></p><h4 id="Fetures"><a href="#Fetures" class="headerlink" title="Fetures:"></a>Fetures:</h4><ul><li>å…¨ä½¿ç”¨iOSé£æ ¼widgetï¼ˆCupertinoTabBaræ­é…CupertinoTabScaffoldï¼‰</li><li>tabBarä¸Šèœå•å¯è‡ªç”±è®¾ç½®æ˜¾ç¤ºé£æ ¼ï¼ˆåŒ…æ‹¬å›¾æ ‡ã€å­—ä½“å¤§å°é¢œè‰²ï¼‰</li></ul><h4 id="Attention"><a href="#Attention" class="headerlink" title="Attention:"></a>Attention:</h4><ul><li>æ­¤å…¥å£ç±»CupertinoTabScaffoldå†…æœªè®¾ç½®navigationBarï¼Œ navigationBaræœ€å¥½éƒ½åœ¨å„è‡ªpageé¡µå†…è®¾ç½®ï¼Œè¿™æ ·å¯è‡ªå®šåˆ¶navigationBarä¸Šæ˜¾ç¤ºçš„ä¸åŒå…ƒç´ ã€‚ï¼ˆå¦‚æœåœ¨æ­¤å…¥å£ç±»è®¾ç½®äº†navigationBarï¼Œå„tabé¦–é¡µpageçš„navigationBarä¸Šæ˜¾ç¤ºå…ƒç´ å°±ä¼šä¸€è‡´ï¼Œä¸ªæ€§åŒ–å®šåˆ¶å„pageçš„navigationBarå°±éœ€è¦åŠ å…¥æ›´å¤šçš„é€»è¾‘ï¼Œå»ºè®®navigationBaråˆ†æ•£åˆ°å„è‡ªçš„pageé¡µå»å®ç°ï¼‰</li></ul><p>main.dart<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> 'package:flutter/cupertino.dart';</span><br><span class="line"><span class="keyword">import</span> 'package:myapp/src/EngwordsPage.dart';</span><br><span class="line"><span class="keyword">import</span> 'package:myapp/src/SamplePage.dart';</span><br><span class="line"><span class="keyword">import</span> 'package:myapp/src/FirstPage.dart';</span><br><span class="line"><span class="keyword">import</span> 'package:myapp/src/ListPage.dart';</span><br><span class="line"></span><br><span class="line">void main() =&gt; runApp(new <span class="type">MyApp</span>());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="title">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  @<span class="keyword">override</span></span><br><span class="line">  _MyMainState createState() =&gt; new _MyMainState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> _MyMainState <span class="title">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">// é»˜è®¤ç´¢å¼•ç¬¬ä¸€ä¸ªtab</span></span><br><span class="line">  int _tabIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ­£å¸¸æƒ…å†µçš„å­—ä½“æ ·å¼</span></span><br><span class="line">  <span class="keyword">final</span> tabTextStyleNormal = new <span class="type">TextStyle</span>(color: const <span class="type">Color</span>(<span class="number">0xff969696</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€‰ä¸­æƒ…å†µçš„å­—ä½“æ ·å¼</span></span><br><span class="line">  <span class="keyword">final</span> tabTextStyleSelect = new <span class="type">TextStyle</span>(color: const <span class="type">Color</span>(<span class="number">0xff63ca6c</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åº•éƒ¨èœå•æ å›¾æ ‡æ•°ç»„</span></span><br><span class="line">  <span class="keyword">var</span> tabImages;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é¡µé¢å†…å®¹</span></span><br><span class="line">  <span class="keyword">var</span> _pages;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// èœå•æ–‡æ¡ˆ</span></span><br><span class="line">  <span class="keyword">var</span> tabTitles = ['æ¨è', 'èµ„è®¯', 'å‘ç°', 'æˆ‘çš„'];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·¯ç”±map</span></span><br><span class="line">  <span class="type">Map</span>&lt;<span class="type">String</span>, <span class="type">WidgetBuilder</span>&gt; _routes = new <span class="type">Map</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”Ÿæˆimageç»„ä»¶</span></span><br><span class="line">  <span class="type">Image</span> getTabImage(path) &#123;</span><br><span class="line">    <span class="keyword">return</span> new <span class="type">Image</span>.asset(path, width: <span class="number">20.0</span>, height: <span class="number">20.0</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  void initData() &#123;</span><br><span class="line">    <span class="keyword">if</span> (tabImages == null) &#123;</span><br><span class="line">      tabImages = [</span><br><span class="line">        [</span><br><span class="line">          getTabImage('assets/images/ic_nav_news_normal.png'),</span><br><span class="line">          getTabImage('assets/images/ic_nav_news_actived.png')</span><br><span class="line">        ],</span><br><span class="line">        [</span><br><span class="line">          getTabImage('assets/images/ic_nav_tweet_normal.png'),</span><br><span class="line">          getTabImage('assets/images/ic_nav_tweet_actived.png')</span><br><span class="line">        ],</span><br><span class="line">        [</span><br><span class="line">          getTabImage('assets/images/ic_nav_discover_normal.png'),</span><br><span class="line">          getTabImage('assets/images/ic_nav_discover_actived.png')</span><br><span class="line">        ],</span><br><span class="line">        [</span><br><span class="line">          getTabImage('assets/images/ic_nav_my_normal.png'),</span><br><span class="line">          getTabImage('assets/images/ic_nav_my_pressed.png')</span><br><span class="line">        ]</span><br><span class="line">      ];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _pages = [</span><br><span class="line">      new <span class="type">EngwordsPage</span>(),</span><br><span class="line">      new <span class="type">SamplePage</span>(),</span><br><span class="line">      new <span class="type">ListWidget</span>(<span class="string">"å‘ç°"</span>),</span><br><span class="line">      new <span class="type">FirstPage</span>()</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è·å–èœå•æ å­—ä½“æ ·å¼</span></span><br><span class="line">  <span class="type">TextStyle</span> getTabTextStyle(int curIndex) &#123;</span><br><span class="line">    <span class="keyword">if</span> (curIndex == _tabIndex) &#123;</span><br><span class="line">      <span class="keyword">return</span> tabTextStyleSelect;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> tabTextStyleNormal;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–å›¾æ ‡</span></span><br><span class="line">  <span class="type">Image</span> getTabIcon(int curIndex) &#123;</span><br><span class="line">    <span class="keyword">if</span> (curIndex == _tabIndex) &#123;</span><br><span class="line">      <span class="keyword">return</span> tabImages[curIndex][<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tabImages[curIndex][<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–æ ‡é¢˜æ–‡æœ¬</span></span><br><span class="line">  <span class="type">Text</span> getTabTitle(int curIndex) &#123;</span><br><span class="line">    <span class="keyword">return</span> new <span class="type">Text</span>(</span><br><span class="line">      tabTitles[curIndex],</span><br><span class="line">      style: getTabTextStyle(curIndex),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è·å–BottomNavigationBarItem</span></span><br><span class="line">  <span class="type">List</span>&lt;<span class="type">BottomNavigationBarItem</span>&gt; getBottomNavigationBarItem() &#123;</span><br><span class="line">    <span class="type">List</span>&lt;<span class="type">BottomNavigationBarItem</span>&gt; list = new <span class="type">List</span>();</span><br><span class="line">    <span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">      list.add(new <span class="type">BottomNavigationBarItem</span>(</span><br><span class="line">          icon: getTabIcon(i), title: getTabTitle(i)));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @<span class="keyword">override</span></span><br><span class="line">  <span class="type">Widget</span> build(<span class="type">BuildContext</span> context) &#123;</span><br><span class="line">    initData();</span><br><span class="line">    <span class="keyword">return</span> new <span class="type">CupertinoApp</span>(</span><br><span class="line">      title: <span class="string">"Demo"</span>,</span><br><span class="line">      theme: new <span class="type">CupertinoThemeData</span>(</span><br><span class="line">        primaryColor: <span class="type">CupertinoColors</span>.darkBackgroundGray,</span><br><span class="line">      ),</span><br><span class="line">      routes: _routes,</span><br><span class="line">      home: new <span class="type">CupertinoTabScaffold</span>(</span><br><span class="line">        tabBar: <span class="type">CupertinoTabBar</span>(</span><br><span class="line">          items: getBottomNavigationBarItem(),</span><br><span class="line">          currentIndex: _tabIndex,</span><br><span class="line">          onTap: (index) &#123;</span><br><span class="line">            setState(() &#123;</span><br><span class="line">              _tabIndex = index;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line">        tabBuilder: (<span class="type">BuildContext</span> context, int index) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="type">CupertinoTabView</span>(</span><br><span class="line">            builder: (<span class="type">BuildContext</span> context) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="type">CupertinoPageScaffold</span>(</span><br><span class="line">                child: _pages[index],</span><br><span class="line">                <span class="comment">// navigationBar: CupertinoNavigationBar(</span></span><br><span class="line">                <span class="comment">//   middle: Text(tabTitles[index]),</span></span><br><span class="line">                <span class="comment">//   trailing: _trailingButtons[index],</span></span><br><span class="line">                <span class="comment">// ),</span></span><br><span class="line">              );</span><br><span class="line">            &#125;,</span><br><span class="line">          );</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>FirstPage.dart<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> 'package:flutter/cupertino.dart';</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FirstPage</span> <span class="title">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  @<span class="keyword">override</span></span><br><span class="line">  <span class="type">FirstPageState</span> createState() =&gt; new <span class="type">FirstPageState</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FirstPageState</span> <span class="title">extends</span> <span class="title">State</span>&lt;<span class="title">FirstPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> rt = new <span class="type">CupertinoButton</span>(</span><br><span class="line">      child: new <span class="type">Image</span>.asset(<span class="string">"assets/images/nav_close.png"</span>),</span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"right clicked"</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  </span><br><span class="line">  @<span class="keyword">override</span></span><br><span class="line">  <span class="type">Widget</span> build(<span class="type">BuildContext</span> context) &#123;</span><br><span class="line">    <span class="keyword">return</span> new <span class="type">CupertinoPageScaffold</span>(</span><br><span class="line">      navigationBar: <span class="type">CupertinoNavigationBar</span>(</span><br><span class="line">        middle: <span class="type">Text</span>(<span class="string">"First"</span>),</span><br><span class="line">        trailing: rt,</span><br><span class="line">        border: <span class="type">Border</span>.all(width: <span class="number">0</span>, color: <span class="type">CupertinoColors</span>.darkBackgroundGray),</span><br><span class="line">      ),</span><br><span class="line">      child: new <span class="type">Container</span>(</span><br><span class="line">        child: new <span class="type">Center</span>(</span><br><span class="line">          child: new <span class="type">Text</span>(</span><br><span class="line">            <span class="string">"è¿™æ˜¯ç¬¬ä¸€ä¸ªç•Œé¢"</span>,</span><br><span class="line">            style: new <span class="type">TextStyle</span>(</span><br><span class="line">              color: <span class="type">CupertinoColors</span>.darkBackgroundGray,</span><br><span class="line">              fontSize: <span class="number">18</span>,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å…¶ä»–ç±»ï¼ˆEngwordsPage.dartã€SamplePage.dartï¼‰éƒ½æ˜¯å¦‚æ­¤çš„UIç»“æ„ã€‚</p><h4 id="Effectsï¼š"><a href="#Effectsï¼š" class="headerlink" title="Effectsï¼š"></a>Effectsï¼š</h4><p><img src="https://upload-images.jianshu.io/upload_images/3603263-07b507b7ba38a3b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/240" alt="capture1.png"></p><p><img src="https://upload-images.jianshu.io/upload_images/3603263-e5a145671d3c85e4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/240" alt="capture2.png"></p><p><img src="https://upload-images.jianshu.io/upload_images/3603263-9411e767fcaf5ff2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/240" alt="capture3.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> App </tag>
            
            <tag> UI </tag>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitå¸¸ç”¨å‘½ä»¤</title>
      <link href="/blog/article/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/blog/article/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>Markä¸€ä¸‹æ—¥å¸¸å·¥ä½œå½“ä¸­å¸¸ç”¨åˆ°çš„gitå‘½ä»¤ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">git stash æš‚å­˜æ–‡ä»¶</span><br><span class="line">git pull æ‹‰å–ä»£ç  </span><br><span class="line">git stash pop ä»æš‚å­˜åŒºæ‹‰å–ä»£ç </span><br><span class="line">git add *.m </span><br><span class="line">git commit -m â€œmessagesâ€  æäº¤ä»£ç </span><br><span class="line">git pull â€”rebase</span><br><span class="line">git push æ¨é€ä»£ç åˆ°ä»“åº“</span><br><span class="line"></span><br><span class="line">git diff xxx.m æ¯”è¾ƒä¿®æ”¹å‰å</span><br><span class="line">git branch æŸ¥çœ‹æœåŠ¡å™¨åˆ†æ”¯åç§°</span><br><span class="line">git checkout branchname åˆ‡æ¢åˆ†æ”¯</span><br><span class="line">git checkout xxx.må›æ»šä¸€ä¸ªæ–‡ä»¶</span><br><span class="line">git checkout .å›æ»šå…¨éƒ¨</span><br><span class="line"></span><br><span class="line">git reset â€”hard é‡ç½®</span><br><span class="line">git clean -rf</span><br><span class="line">./fmanager pull -v</span><br><span class="line"></span><br><span class="line">git branch -a æŸ¥çœ‹è¿œç¨‹æ‰€æœ‰åˆ†æ”¯</span><br><span class="line">git branch æŸ¥çœ‹å½“å‰åˆ†æ”¯</span><br><span class="line">git branch masterï¼ˆæœ¬åœ°åˆ†æ”¯åï¼‰  origin/masterï¼ˆè¿œç¨‹åˆ†æ”¯ï¼‰----åˆ‡æ¢åˆ†æ”¯</span><br><span class="line"></span><br><span class="line"><span class="comment">//å›é€€å…¨éƒ¨ä»£ç </span></span><br><span class="line">git reset HEAD</span><br><span class="line">git clean -f</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›´æ¥å…‹éš†åˆ†æ”¯ä»“åº“åˆ°æœ¬åœ°</span></span><br><span class="line">git clone -b yzt_live_20180921 http:<span class="comment">//git-ma.paic.com.cn/Toa/Fusion.git</span></span><br><span class="line"></span><br><span class="line">pod lib lint --sources='https://git.oschina.net/ch_team/Specs.git,https://github.com/CocoaPods/Specs.git' --verbose</span><br><span class="line"></span><br><span class="line">Unable to find a pod with name, author, summary, <span class="keyword">or</span> description matching</span><br><span class="line">rm ~/Library/Caches/CocoaPods/search_index.json</span><br><span class="line"></span><br><span class="line">pod spec lint XSSchoolCommon.podspec --sources='https://git.oschina.net/ch_team/Specs.git,https://github.com/CocoaPods/Specs.git' --allow-warnings</span><br><span class="line">pod setup</span><br><span class="line"></span><br><span class="line">pod lib lint --sources='http://git-ma.paic.com.cn/ToaApp/YZT-iOS-Pod-Spec.git,http://git-ma.paic.com.cn/ToaApp/YZT-iOS-Pod-Master.git' --allow-warnings --verbose</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> å‘½ä»¤ </tag>
            
            <tag> command </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSç»„ä»¶åŒ–å®ç°æ­¥éª¤æ€»ç»“</title>
      <link href="/blog/article/iOS%E7%BB%84%E4%BB%B6%E5%8C%96%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4%E6%80%BB%E7%BB%93/"/>
      <url>/blog/article/iOS%E7%BB%84%E4%BB%B6%E5%8C%96%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>éšç€åº”ç”¨ä¸šåŠ¡çš„å¢åŠ ï¼Œé¡¹ç›®é€æ¸å˜å¾—åºå¤§ï¼Œå®æ–½ç»„ä»¶åŒ–æ–¹æ¡ˆå°±ä¼šæ˜¾å¾—å°¤ä¸ºå¿…è¦ã€‚ç½‘ä¸Šçš„èµ„æ–™ç¹æ‚ï¼Œä»‹äºæœ‰çš„è¡¨è¾¾ä¸æ˜¯ç‰¹åˆ«æ¸…æ™°ï¼Œè¿™é‡Œè®°å½•ä¸ªäººå®ç°iOSç»„ä»¶åŒ–çš„æ­¥éª¤ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°ä½ ï¼Œè§£å†³åœ¨ç»„ä»¶åŒ–è¿‡ç¨‹ä¸­çŒœåˆ°çš„å‘ã€‚</p><h3 id="1ã€åˆ›å»ºç§æœ‰Repoï¼ˆSpecsï¼‰"><a href="#1ã€åˆ›å»ºç§æœ‰Repoï¼ˆSpecsï¼‰" class="headerlink" title="1ã€åˆ›å»ºç§æœ‰Repoï¼ˆSpecsï¼‰"></a>1ã€åˆ›å»ºç§æœ‰Repoï¼ˆSpecsï¼‰</h3><ul><li>åœ¨Gitä¸Šåˆ›å»ºä¸€ä¸ªRespositoryï¼Œå¹¶å‘½åä¸ºSpecsï¼›</li><li>æ·»åŠ Private Podå¹¶éªŒè¯<br>ç»ˆç«¯ä¾æ¬¡æ‰§è¡Œï¼š</li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/<span class="regexp">/ æ·»åŠ ç§æœ‰Repo</span></span><br><span class="line"><span class="regexp">pod repo add ch_team https:/</span><span class="regexp">/git.oschina.net/ch</span>_team/Specs.git</span><br><span class="line">/<span class="regexp">/ éªŒè¯æ˜¯å¦æˆåŠŸ</span></span><br><span class="line"><span class="regexp">pod repo lint .</span></span><br></pre></td></tr></table></figure><h3 id="2ã€åˆ›å»ºä¸»å·¥ç¨‹"><a href="#2ã€åˆ›å»ºä¸»å·¥ç¨‹" class="headerlink" title="2ã€åˆ›å»ºä¸»å·¥ç¨‹"></a>2ã€åˆ›å»ºä¸»å·¥ç¨‹</h3><ul><li>åœ¨Gitä¸Šåˆ›å»ºä¸€ä¸ªRespositoryï¼Œå¹¶å‘½åä¸ºPAToapAPPï¼›</li><li><p>å°†Respositoryæ‹‰å–ä¸‹æ¥å¹¶ä¸”é€šè¿‡XCodecåˆ›å»ºå·¥ç¨‹ï¼Œç»ˆç«¯æ‰§è¡Œï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone <span class="symbol">https:</span>/<span class="regexp">/git.oschina.net/ch</span>_team/PAToapAPP.git</span><br></pre></td></tr></table></figure></li><li><p>ç»ˆç«¯åˆ‡åˆ°PAToapAPPå·¥ç¨‹æ ¹ç›®å½•ä¸‹ï¼Œåˆå§‹åŒ–ä½ çš„Podfileï¼Œæ­¤æ—¶ä¸éœ€è¦åœ¨Podfileæ·»åŠ ä»»ä½•ä¾èµ–<br>ç»ˆç«¯æ‰§è¡Œï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod init</span><br><span class="line">pod install</span><br></pre></td></tr></table></figure></li></ul><p>ç°åœ¨ä¸»å·¥ç¨‹å·²åˆ›å»ºå®Œæ¯•ã€‚</p><h3 id="3ã€åˆ›å»ºç»„ä»¶Podï¼ˆåˆ›å»ºå¤šä¸ªPodï¼Œåˆ›å»ºæ–¹å¼ç›¸åŒï¼‰"><a href="#3ã€åˆ›å»ºç»„ä»¶Podï¼ˆåˆ›å»ºå¤šä¸ªPodï¼Œåˆ›å»ºæ–¹å¼ç›¸åŒï¼‰" class="headerlink" title="3ã€åˆ›å»ºç»„ä»¶Podï¼ˆåˆ›å»ºå¤šä¸ªPodï¼Œåˆ›å»ºæ–¹å¼ç›¸åŒï¼‰"></a>3ã€åˆ›å»ºç»„ä»¶Podï¼ˆåˆ›å»ºå¤šä¸ªPodï¼Œåˆ›å»ºæ–¹å¼ç›¸åŒï¼‰</h3><ul><li><p>åœ¨Gitä¸Šåˆ›å»ºRepositoryï¼Œå¹¶æ‹‰å–åˆ°æœ¬åœ°</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone <span class="symbol">https:</span>/<span class="regexp">/git.oschina.net/ch</span>_team/PAToapAPP-User.git</span><br></pre></td></tr></table></figure></li><li><p>åœ¨PAToapAPP-Userå·¥ç¨‹ç›®å½•ä¸‹ï¼Œåˆ›å»ºExampleå·¥ç¨‹</p></li><li>åˆ›å»º.podspecï¼Œå¹¶ä¸”åˆ›å»ºPod/Classesç›®å½•ï¼Œ å°†Exampleçš„Viewã€ViewModelã€Modelæ‹·è´è‡³Classesç›®å½•<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod spec create PAToapAPP-User</span><br></pre></td></tr></table></figure></li></ul><p>æ–‡ä»¶ç›®å½•å˜ä¸ºï¼š<br>Example(ğŸ“‚)<br>LICENSE<br>Pod(ğŸ“ƒ)<br>â€¦â€¦Classes(ğŸ“‚)<br>â€¦â€¦â€¦â€¦Model(ğŸ“‚)<br>â€¦â€¦â€¦â€¦View(ğŸ“‚)<br>â€¦â€¦â€¦â€¦ViewModel(ğŸ“‚)<br>README.md<br>PAToapAPP-User.podspec</p><ul><li><p>ä¿®æ”¹.podspecæ–‡ä»¶</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s.homepage      =  <span class="string">"http://git.oschina.net/ch_team/PAToapAPP-User"</span></span><br><span class="line">s.license       =  &#123; <span class="symbol">:type</span> =&gt; <span class="string">"MIT"</span>, <span class="symbol">:file</span> =&gt; <span class="string">"LICENSE"</span> &#125;</span><br><span class="line">s.source_files  =  <span class="string">"Pod/Classes"</span>, <span class="string">"Pod/Classes/**/*.&#123;h,m&#125;"</span></span><br></pre></td></tr></table></figure></li><li><p>æœ¬åœ°éªŒè¯.podspecæ˜¯å¦æ­£ç¡®</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pod lib lint</span><br></pre></td></tr></table></figure></li><li><p>æäº¤åˆ°Githubï¼Œå¹¶è¿œç¨‹éªŒè¯ï¼ŒæŒ‰ç…§ä¸‹åˆ—æ­¥éª¤éœ€è¦é¦–å…ˆæäº¤Gitï¼Œç„¶åæ·»åŠ Tag</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git add .</span><br><span class="line">$ git commit -m <span class="string">"æ·»åŠ Pod"</span></span><br><span class="line">$ git push</span><br><span class="line"><span class="comment">#æ·»åŠ Tag</span></span><br><span class="line">$ git tag <span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span> <span class="comment">#è¿™é‡Œéœ€è¦ä¸ä½ çš„.podspecä¸­s.versionå€¼ç›¸åŒ</span></span><br><span class="line">$ git push --tags</span><br><span class="line"><span class="comment">#éªŒè¯</span></span><br><span class="line">$ pod spec lint</span><br><span class="line">-&gt; PAToapAPP-User(<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>)</span><br><span class="line">Analyzed <span class="number">1</span> podspec</span><br><span class="line">PAToapAPP-User.podspec passed validation.</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ Podåˆ°ä½ çš„ç§æœ‰çš„Repoä¸­</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ pod repo push ch_team PAToapAPP-User.podspec</span><br><span class="line">Validatiing spec</span><br><span class="line">-&gt;PAToapAPP-User(<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>)</span><br><span class="line">Updating the <span class="string">`ch_team`</span> repo</span><br><span class="line">Already up-to-date.</span><br><span class="line">Adding the spec to the <span class="string">`ch_team`</span> repo</span><br><span class="line">-[No change] PAToapAPP-User(<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>)</span><br><span class="line">Pushing the <span class="string">`ch_team`</span> repo</span><br></pre></td></tr></table></figure></li><li><p>è¯•è¯•æœç´¢ä½ çš„Pod</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ pod search PAToapAPP-User</span><br><span class="line">-&gt;PAToapAPP-User(<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>)</span><br><span class="line">ä¸šåŠ¡ç»„ä»¶A</span><br><span class="line">pod <span class="string">'PAToapAPP-User'</span>, <span class="string">'~&gt; 0.0.1'</span></span><br></pre></td></tr></table></figure></li><li><p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨äº†ï¼Œè¯·è®°ä½åœ¨ä½ çš„Podfileä¸­æ·»åŠ ä½ Private Pod æº</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">source <span class="string">'https://github.com/CocoaPods/Specs'</span> </span><br><span class="line">source <span class="string">'https://github.com/ch_team/Specs.git'</span> </span><br><span class="line">platform <span class="symbol">:ios</span>, <span class="string">"9.0"</span> </span><br><span class="line">target <span class="string">"XXX"</span> <span class="keyword">do</span> </span><br><span class="line">pod <span class="string">'PAToapAPP-User'</span>, <span class="string">'~&gt;0.0.1'</span> </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></li></ul><p>å½“ç»„ä»¶åŒ–é¡¹ç›®å®Œæˆä»¥åï¼Œåç»­å¼€å‘ä¸­ä¸»è¦çš„æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>å·¥ç¨‹ä»£ç å˜æ›´ï¼Œè¿›å…¥podspecæ–‡ä»¶ä¿®æ”¹versionç‰ˆæœ¬å·</li><li>git commit -am â€œä¿®æ”¹è¯´æ˜â€æäº¤å·¥ç¨‹æ‰€æœ‰ä¿®æ”¹</li><li>pod repo push xxx  xxx.podspecæäº¤éªŒè¯specæ–‡ä»¶</li><li>åœ¨æ ¹ç›®å½•çš„.cocoapodsç›®å½•ä¸‹å»æŸ¥çœ‹å·¥ç¨‹æ˜¯å¦æœ‰å¯¹åº”ç‰ˆæœ¬ä¿¡æ¯</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> App </tag>
            
            <tag> å·¥ç¨‹ </tag>
            
            <tag> ç»„ä»¶åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EasySegmentedControlå®šæ—¶æ˜¾ç¤ºæ ·å¼ä½¿ç”¨è¯´æ˜</title>
      <link href="/blog/article/EasySegmentedControl%E5%AE%9A%E5%88%B6%E6%98%BE%E7%A4%BA%E6%A0%B7%E5%BC%8F%E4%BD%BF%E7%94%A8/"/>
      <url>/blog/article/EasySegmentedControl%E5%AE%9A%E5%88%B6%E6%98%BE%E7%A4%BA%E6%A0%B7%E5%BC%8F%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/wsj2012/EasySegmentedControl" target="_blank" rel="noopener">EasySegmentedControl</a>æ˜¯<a href="https://github.com/HeshamMegid/HMSegmentedControl" target="_blank" rel="noopener">HMSegmentedControl</a>çš„swiftç‰ˆæœ¬ï¼Œä¸¤ä¸ªåº“çš„å®ç°ç»†èŠ‚åŠå®ç°æ–¹å¼æ˜¯ä¸€è‡´çš„ï¼Œé‰´äºé‡Œé¢æœ‰å¾ˆå¤šå±æ€§å‚æ•°çš„è®¾ç½®ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨æ­¤åº“çš„äººå¯¹æœ‰çš„å‚æ•°ä½¿ç”¨ä¸æ˜¯å¾ˆæ˜ç™½ï¼Œå„å‚æ•°ä½¿ç”¨å¯¹å®šåˆ¶æ ·å¼å®é™…ä½œç”¨ä¸ä¼šå¾ˆç†Ÿæ‚‰ï¼Œæ•…å†™æ­¤æ–‡ï¼Œå¯ä»¥æ›´å¥½çš„å¸®åŠ©ä½ ä½¿ç”¨æ­¤ç¬¬ä¸‰æ–¹åº“ï¼Œçµæ´»åœ°å®šåˆ¶å‡ºè‡ªå·±æƒ³è¦çš„æ ·å¼ã€‚æ­¤æ–‡æä¾›äº”ç§æ ·å¼Demoï¼Œå¯åœ¨æ­¤äº”ç§æ ·å¼ä¸Šçµæ´»è°ƒæ•´å‚æ•°ï¼Œä»¥å®šåˆ¶å‡ºä¸åŒæ ·å¼çš„åˆ†æ®µæ§åˆ¶å™¨ã€‚</p><h4 id="æ¥å…¥æ–¹å¼å¯é€‰æ‹©å¦‚ä¸‹æ–¹å¼ä¸­çš„ä¸€ç§ï¼š"><a href="#æ¥å…¥æ–¹å¼å¯é€‰æ‹©å¦‚ä¸‹æ–¹å¼ä¸­çš„ä¸€ç§ï¼š" class="headerlink" title="æ¥å…¥æ–¹å¼å¯é€‰æ‹©å¦‚ä¸‹æ–¹å¼ä¸­çš„ä¸€ç§ï¼š"></a>æ¥å…¥æ–¹å¼å¯é€‰æ‹©å¦‚ä¸‹æ–¹å¼ä¸­çš„ä¸€ç§ï¼š</h4><ul><li>pod â€˜EasySegmentedControlâ€™  </li><li>å°†EasySegmentedControl.swiftæ–‡ä»¶å¯¼å…¥è‡ªå·±çš„å·¥ç¨‹</li></ul><h1 id="Demoâ‘ "><a href="#Demoâ‘ " class="headerlink" title="Demoâ‘ "></a>Demoâ‘ </h1><h4 id="Style1ï¼š"><a href="#Style1ï¼š" class="headerlink" title="Style1ï¼š"></a>Style1ï¼š</h4><ul><li>æ•ˆæœå›¾</li></ul><p><img src="https://upload-images.jianshu.io/upload_images/3603263-5085471db33101c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ScreenShot1.png"></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> viewWidth = view.frame.size.width</span><br><span class="line">      <span class="keyword">let</span> sc = <span class="type">EasySegmentedControl</span>.<span class="keyword">init</span>(with: [<span class="string">"Trending"</span>, <span class="string">"News"</span>, <span class="string">"Library"</span>])</span><br><span class="line">      sc.frame = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">88</span>, width: viewWidth, height: <span class="number">40</span>)</span><br><span class="line">      sc.autoresizingMask = [.flexibleRightMargin, .flexibleWidth]</span><br><span class="line">      sc.backgroundsColor = <span class="type">UIColor</span>.clear</span><br><span class="line">      sc.addTarget(<span class="keyword">self</span>, action: #selector(segmentedControlChangedValue(segmentedControl:)), <span class="keyword">for</span>: .valueChanged)</span><br><span class="line">      view.addSubview(sc)</span><br></pre></td></tr></table></figure><h1 id="Demoâ‘¡"><a href="#Demoâ‘¡" class="headerlink" title="Demoâ‘¡"></a>Demoâ‘¡</h1><h4 id="Style2ï¼š"><a href="#Style2ï¼š" class="headerlink" title="Style2ï¼š"></a>Style2ï¼š</h4><p><img src="https://upload-images.jianshu.io/upload_images/3603263-165d665c8cf9e44f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ScreenShot2.png"></p><p>Code:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sc1 = <span class="type">EasySegmentedControl</span>.<span class="keyword">init</span>(with: [<span class="string">"One"</span>, <span class="string">"Two"</span>, <span class="string">"Three"</span>, <span class="string">"Four"</span>, <span class="string">"Five"</span>, <span class="string">"Six"</span>, <span class="string">"Seven"</span>, <span class="string">"Eight"</span>])</span><br><span class="line">      sc1.autoresizingMask = [.flexibleRightMargin, .flexibleWidth]</span><br><span class="line">      sc1.frame = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">60</span> + <span class="number">68</span>, width: viewWidth, height: <span class="number">40</span>)</span><br><span class="line">      sc1.segmentEdgeInset = <span class="type">UIEdgeInsets</span>(top: <span class="number">0</span>, <span class="keyword">left</span>: <span class="number">10</span>, bottom: <span class="number">0</span>, <span class="keyword">right</span>: <span class="number">10</span>)</span><br><span class="line">      sc1.selectionStyle = .<span class="type">FullWidthStripe</span></span><br><span class="line">      sc1.selectionIndicatorLocation = .<span class="type">Down</span></span><br><span class="line">      sc1.verticalDividerEnabled = <span class="literal">true</span></span><br><span class="line">      sc1.verticalDividerColor = .black</span><br><span class="line">      sc1.verticalDividerWidth = <span class="number">1.0</span></span><br><span class="line">      sc1.titleFormatter = &#123;(seg, title, index, selected) <span class="keyword">in</span></span><br><span class="line">          <span class="keyword">let</span> attString = <span class="type">NSAttributedString</span>.<span class="keyword">init</span>(string: title, attributes: [<span class="type">NSAttributedString</span>.<span class="type">Key</span>.foregroundColor : <span class="type">UIColor</span>.blue])</span><br><span class="line">          <span class="keyword">return</span> attString</span><br><span class="line">      &#125;</span><br><span class="line">      sc1.addTarget(<span class="keyword">self</span>, action: #selector(segmentedControlChangedValue(segmentedControl:)), <span class="keyword">for</span>: .valueChanged)</span><br><span class="line">      view.addSubview(sc1)</span><br></pre></td></tr></table></figure><h1 id="Demoâ‘¢"><a href="#Demoâ‘¢" class="headerlink" title="Demoâ‘¢"></a>Demoâ‘¢</h1><h4 id="Style3ï¼š"><a href="#Style3ï¼š" class="headerlink" title="Style3ï¼š"></a>Style3ï¼š</h4><p><img src="https://upload-images.jianshu.io/upload_images/3603263-116ae38162eb3de2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ScreenShot3.png"></p><p>Code:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">sc1.addTarget(<span class="keyword">self</span>, action: #selector(segmentedControlChangedValue(segmentedControl:)), <span class="keyword">for</span>: .valueChanged)</span><br><span class="line">view.addSubview(sc1)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Segmented control with images</span></span><br><span class="line"><span class="keyword">let</span> images: [<span class="type">UIImage</span>] = [<span class="type">UIImage</span>(named: <span class="string">"1"</span>)!, <span class="type">UIImage</span>(named: <span class="string">"2"</span>)!, <span class="type">UIImage</span>(named: <span class="string">"3"</span>)!, <span class="type">UIImage</span>(named: <span class="string">"4"</span>)!]</span><br><span class="line"><span class="keyword">let</span> selectedImages: [<span class="type">UIImage</span>] = [<span class="type">UIImage</span>(named: <span class="string">"1-selected"</span>)!, <span class="type">UIImage</span>(named: <span class="string">"2-selected"</span>)!, <span class="type">UIImage</span>(named: <span class="string">"3-selected"</span>)!, <span class="type">UIImage</span>(named: <span class="string">"4-selected"</span>)!]</span><br><span class="line"><span class="keyword">let</span> titles: [<span class="type">String</span>] = [<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>]</span><br><span class="line"><span class="keyword">let</span> sc2 = <span class="type">EasySegmentedControl</span>.<span class="keyword">init</span>(with: images, sectionSelectedImages: selectedImages, sectiontitles: titles)</span><br><span class="line">sc2.imagePosition = .<span class="type">LeftOfText</span></span><br><span class="line">sc2.frame = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">120</span> + <span class="number">68</span>, width: viewWidth, height: <span class="number">50</span>)</span><br><span class="line">sc2.selectionIndicatorHeight = <span class="number">4.0</span></span><br><span class="line">sc2.backgroundsColor = <span class="type">UIColor</span>.clear</span><br><span class="line">sc2.selectionIndicatorLocation = .<span class="type">Down</span></span><br><span class="line">sc2.selectionStyle = .<span class="type">TextWidthStripe</span></span><br><span class="line">sc2.segmentWidthStyle = .<span class="type">Dynamic</span></span><br><span class="line">sc2.addTarget(<span class="keyword">self</span>, action: #selector(segmentedControlChangedValue(segmentedControl:)), <span class="keyword">for</span>: .valueChanged)</span><br><span class="line">view.addSubview(sc2)</span><br></pre></td></tr></table></figure><h1 id="Demoâ‘£"><a href="#Demoâ‘£" class="headerlink" title="Demoâ‘£"></a>Demoâ‘£</h1><h4 id="Style4ï¼š"><a href="#Style4ï¼š" class="headerlink" title="Style4ï¼š"></a>Style4ï¼š</h4><p><img src="https://upload-images.jianshu.io/upload_images/3603263-f39cc2d901a72d8d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ScreenShot4.png"></p><p>Code:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sc3 = <span class="type">EasySegmentedControl</span>.<span class="keyword">init</span>(with: [<span class="string">"one"</span>, <span class="string">"Two"</span>, <span class="string">"Three"</span>, <span class="string">"4"</span>, <span class="string">"Five"</span>])</span><br><span class="line">      sc3.frame = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">180</span> + <span class="number">68</span>, width: viewWidth, height: <span class="number">50</span>)</span><br><span class="line">      sc3.indexChangeBlock = &#123; index <span class="keyword">in</span></span><br><span class="line">          <span class="built_in">print</span>(<span class="string">"Selected index \(index) (via block)"</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      sc3.selectionIndicatorHeight = <span class="number">4.0</span></span><br><span class="line">      sc3.backgroundsColor = <span class="type">UIColor</span>(red: <span class="number">0.1</span>, green: <span class="number">0.4</span>, blue: <span class="number">0.8</span>, alpha: <span class="number">1</span>)</span><br><span class="line">      sc3.titleTextAttributes = [<span class="type">NSAttributedString</span>.<span class="type">Key</span>.foregroundColor: <span class="type">UIColor</span>.white]</span><br><span class="line">      sc3.selectionIndicatorColor = <span class="type">UIColor</span>(red: <span class="number">0.5</span>, green: <span class="number">0.8</span>, blue: <span class="number">1</span>, alpha: <span class="number">1</span>)</span><br><span class="line">      sc3.selectionIndicatorBoxColor = <span class="type">UIColor</span>.black</span><br><span class="line">      sc3.selectionIndicatorBoxOpacity = <span class="number">1.0</span></span><br><span class="line">      sc3.selectionStyle = .<span class="type">Box</span></span><br><span class="line">      sc3.selectedSegmentIndex = <span class="type">NoSegment</span></span><br><span class="line">      sc3.selectionIndicatorLocation = .<span class="type">Down</span></span><br><span class="line">      sc3.shouldAnimateUserSelection = <span class="literal">false</span></span><br><span class="line">      sc3.tag = <span class="number">2</span></span><br><span class="line">      view.addSubview(sc3)</span><br></pre></td></tr></table></figure><h1 id="Demoâ‘¤"><a href="#Demoâ‘¤" class="headerlink" title="Demoâ‘¤"></a>Demoâ‘¤</h1><h4 id="Style5ï¼š"><a href="#Style5ï¼š" class="headerlink" title="Style5ï¼š"></a>Style5ï¼š</h4><p><img src="https://upload-images.jianshu.io/upload_images/3603263-0b07727b687ec1ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ScreenShot5.png"></p><p>Code:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">lazy</span> <span class="keyword">var</span> scrollView: <span class="type">UIScrollView</span> = &#123;</span><br><span class="line">    <span class="keyword">let</span> s = <span class="type">UIScrollView</span>.<span class="keyword">init</span>(frame: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">310</span> + <span class="number">68</span>, width: view.frame.size.width, height: <span class="number">210</span>))</span><br><span class="line">    s.backgroundColor = <span class="type">UIColor</span>(red: <span class="number">0.7</span>, green: <span class="number">0.7</span>, blue: <span class="number">0.7</span>, alpha: <span class="number">1</span>)</span><br><span class="line">    s.isPagingEnabled = <span class="literal">true</span></span><br><span class="line">    s.showsHorizontalScrollIndicator = <span class="literal">false</span></span><br><span class="line">    s.contentSize = <span class="type">CGSize</span>(width: view.frame.size.width * <span class="number">3</span>, height: <span class="number">200</span>)</span><br><span class="line">    s.delegate = <span class="keyword">self</span></span><br><span class="line">    s.scrollRectToVisible(<span class="type">CGRect</span>(x: view.frame.size.width, y: <span class="number">0</span>, width: view.frame.size.width, height: <span class="number">200</span>), animated: <span class="literal">false</span>)</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> sc4 = <span class="type">EasySegmentedControl</span>.<span class="keyword">init</span>(frame: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">260</span> + <span class="number">68</span>, width: view.frame.size.width, height: <span class="number">50</span>))</span><br><span class="line">    sc4.sectionTitles = [<span class="string">"Worldwide"</span>, <span class="string">"Local"</span>, <span class="string">"Headlines"</span>]</span><br><span class="line">    sc4.selectedSegmentIndex = <span class="number">1</span></span><br><span class="line">    sc4.backgroundColor = <span class="type">UIColor</span>(red: <span class="number">0.7</span>, green: <span class="number">0.7</span>, blue: <span class="number">0.7</span>, alpha: <span class="number">1</span>)</span><br><span class="line">    sc4.titleTextAttributes = [<span class="type">NSAttributedString</span>.<span class="type">Key</span>.foregroundColor: <span class="type">UIColor</span>.white]</span><br><span class="line">    sc4.selectedTitleTextAttributes = [<span class="type">NSAttributedString</span>.<span class="type">Key</span>.foregroundColor: <span class="type">UIColor</span>(red: <span class="number">0.1</span>, green: <span class="number">0.1</span>, blue: <span class="number">0.1</span>, alpha: <span class="number">1</span>)]</span><br><span class="line">    sc4.selectionIndicatorColor = <span class="type">UIColor</span>(red: <span class="number">0.3</span>, green: <span class="number">0.3</span>, blue: <span class="number">0.3</span>, alpha: <span class="number">1</span>)</span><br><span class="line">    sc4.selectionStyle = .<span class="type">Box</span>;</span><br><span class="line">    sc4.selectionIndicatorLocation = .<span class="type">Up</span>;</span><br><span class="line">    sc4.tag = <span class="number">3</span>;</span><br><span class="line">    sc4.indexChangeBlock = &#123;[<span class="keyword">weak</span> <span class="keyword">self</span>] index <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> strongSelf = <span class="keyword">self</span> &#123;</span><br><span class="line">            strongSelf.scrollView.scrollRectToVisible(<span class="type">CGRect</span>(x: viewWidth * <span class="type">CGFloat</span>(index), y: <span class="number">0</span>, width: viewWidth, height: <span class="number">200</span>), animated: <span class="literal">true</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    view.addSubview(sc4)</span><br><span class="line"></span><br><span class="line">   <span class="keyword">let</span> lable1 = <span class="type">UILabel</span>.<span class="keyword">init</span>(frame: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: viewWidth, height: <span class="number">210</span>))</span><br><span class="line">    setApperanceFor(label: lable1)</span><br><span class="line">    lable1.text = <span class="string">"Worldwide"</span></span><br><span class="line">    scrollView.addSubview(lable1)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> lable2 = <span class="type">UILabel</span>.<span class="keyword">init</span>(frame: <span class="type">CGRect</span>(x: viewWidth, y: <span class="number">0</span>, width: viewWidth, height: <span class="number">210</span>))</span><br><span class="line">    setApperanceFor(label: lable2)</span><br><span class="line">    lable2.text = <span class="string">"Local"</span></span><br><span class="line">    scrollView.addSubview(lable2)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> lable3 = <span class="type">UILabel</span>.<span class="keyword">init</span>(frame: <span class="type">CGRect</span>(x: viewWidth * <span class="number">2</span>, y: <span class="number">0</span>, width: viewWidth, height: <span class="number">210</span>))</span><br><span class="line">    setApperanceFor(label: lable3)</span><br><span class="line">    lable3.text = <span class="string">"Headlines"</span></span><br><span class="line">    scrollView.addSubview(lable3)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">scrollViewDidEndDecelerating</span><span class="params">(<span class="number">_</span> scrollView: UIScrollView)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> pageWidth = scrollView.frame.size.width</span><br><span class="line">    <span class="keyword">let</span> page = <span class="type">Int</span>(scrollView.contentOffset.x / pageWidth)</span><br><span class="line">    sc4.setSelectedSegment(index: page, animated: <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‚¨å¯æ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œè°ƒæ•´å‚æ•°è¾¾åˆ°UIè®¾è®¡çš„æ ·å¼è§„èŒƒã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> App </tag>
            
            <tag> Swift </tag>
            
            <tag> UI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸‰è§’å‡½æ•°åœ¨ç»˜åˆ¶åœ†ä¸­çš„ä½¿ç”¨</title>
      <link href="/blog/article/%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E5%9C%A8%E7%BB%98%E5%88%B6%E5%9C%86%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/blog/article/%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E5%9C%A8%E7%BB%98%E5%88%B6%E5%9C%86%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ç»˜åˆ¶é¥¼å›¾ç™¾åˆ†æ¯”å›¾ä¾‹æ ‡è¯†ç±»çš„å›¾å½¢ä¸­ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°ä¸‰è§’å‡½æ•°ç›¸å…³çš„çŸ¥è¯†ç‚¹æ¥è®¡ç®—å„ä¸ªç‚¹çš„ä½ç½®ï¼Œè¿™é‡Œå®ç°äº†ä¸€ä¸ªç®€å•çš„é¥¼å›¾ç™¾åˆ†æ¯”å›¾ä¾‹æ ‡è¯†çš„exampleï¼Œé€šè¿‡æ­¤ä¾‹å¯ä¸¾ä¸€åä¸‰ç»“åˆå®é™…é¡¹ç›®ä¸­çš„éœ€æ±‚ï¼Œå®ç°å…¶æ‰€éœ€è¦çš„æ•ˆæœã€‚å¸Œæœ›ä½ èƒ½é€šè¿‡æ­¤ä¾‹èƒ½æœ‰æ‰€æ”¶è·ã€‚æ­¤ä¾‹å­ä¸ºObjective-Cç‰ˆæœ¬ã€‚</p><p>ç›´æ¥ä¸Šä»£ç ï¼š<br>æ–°å»ºä¸€ä¸ªç»§æ‰¿è‡ªUIViewçš„å¯¹è±¡ï¼š</p><p>.hæ–‡ä»¶ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  </span></span><br><span class="line"><span class="comment">//  PieView.h  </span></span><br><span class="line"><span class="comment">//  BlurDemo  </span></span><br><span class="line"><span class="comment">//  </span></span><br><span class="line"><span class="comment">//  Created by sj_w on 15/9/11.  </span></span><br><span class="line"><span class="comment">//  Copyright (c) 2015å¹´ sj_w. All rights reserved.  </span></span><br><span class="line"><span class="comment">//  </span></span><br><span class="line">  </span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span>  </span></span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">PieView</span> : <span class="title">UIView</span>  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSArray</span>   *percentArr;<span class="comment">//ç™¾åˆ†æ¯”åˆ†æ®µ  </span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSMutableArray</span>    *angleArr;<span class="comment">//å¯¹åº”çš„å¼§åº¦  </span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSMutableArray</span>    *midAngleArr;<span class="comment">//æ¯ä¸ªå¼§åº¦åˆ†æ®µçš„ä¸­å¿ƒç‚¹ä½ç½®  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>.mæ–‡ä»¶ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  </span></span><br><span class="line"><span class="comment">//  PieView.m  </span></span><br><span class="line"><span class="comment">//  BlurDemo  </span></span><br><span class="line"><span class="comment">//  </span></span><br><span class="line"><span class="comment">//  Created by sj_w on 15/9/11.  </span></span><br><span class="line"><span class="comment">//  Copyright (c) 2015å¹´ sj_w. All rights reserved.  </span></span><br><span class="line"><span class="comment">//  </span></span><br><span class="line">  </span><br><span class="line"><span class="meta">#import <span class="meta-string">"PieView.h"</span>  </span></span><br><span class="line"><span class="meta">#define kScreenWidth [UIScreen mainScreen].bounds.size.width  </span></span><br><span class="line"><span class="meta">#define OUTR ((kScreenWidth)/4)  </span></span><br><span class="line"><span class="meta">#define INR  ((kScreenWidth/4)-26)  </span></span><br><span class="line"><span class="meta">#define PIECENTERX kScreenWidth/2  </span></span><br><span class="line"><span class="meta">#define PIECENTERY 150  </span></span><br><span class="line"><span class="meta">#define PIECENTER CGPointMake(kScreenWidth/2, frame.size.height/2)  </span></span><br><span class="line"><span class="meta">#define LABELTAG 121  </span></span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">PieView</span>  </span></span><br><span class="line">  </span><br><span class="line">- (<span class="keyword">id</span>)initWithFrame:(<span class="built_in">CGRect</span>)frame  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> initWithFrame:frame];  </span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;  </span><br><span class="line">        <span class="keyword">self</span>.frame = frame;  </span><br><span class="line">        <span class="keyword">self</span>.backgroundColor = [<span class="built_in">UIColor</span> orangeColor];  </span><br><span class="line">        [<span class="keyword">self</span> initArr];  </span><br><span class="line">        [<span class="keyword">self</span> initSubviews];  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">- (<span class="keyword">void</span>)initSubviews &#123;  </span><br><span class="line">      </span><br><span class="line">    <span class="built_in">NSArray</span> *titleArr = @[<span class="string">@"ç°é‡‘ç±»"</span>,<span class="string">@"å›ºå®šæ”¶ç›Šç±»"</span>,<span class="string">@"è‚¡ç¥¨ç±»"</span>];  </span><br><span class="line">    <span class="built_in">NSArray</span> *subTitleArr = @[<span class="string">@"30%"</span>,<span class="string">@"60%"</span>,<span class="string">@"10%"</span>];  </span><br><span class="line">      </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">self</span>.percentArr.count; i++) &#123;  </span><br><span class="line">        <span class="built_in">UILabel</span> *label = [[<span class="built_in">UILabel</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">-100</span>, <span class="number">-100</span>, <span class="number">100</span>, <span class="number">100</span>)];  </span><br><span class="line">        label.font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">16</span>];  </span><br><span class="line">        label.text = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@\n%@"</span>,titleArr[i],subTitleArr[i]];  </span><br><span class="line">        label.textColor = [<span class="built_in">UIColor</span> whiteColor];  </span><br><span class="line">        label.textAlignment = <span class="built_in">NSTextAlignmentCenter</span>;  </span><br><span class="line">        label.numberOfLines = <span class="number">0</span>;  </span><br><span class="line">        label.lineBreakMode = <span class="built_in">NSLineBreakByCharWrapping</span>;  </span><br><span class="line">        label.tag = LABELTAG+i;  </span><br><span class="line">        [<span class="keyword">self</span> addSubview:label];  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">- (<span class="keyword">void</span>)initArr &#123;  </span><br><span class="line">    <span class="keyword">self</span>.percentArr = @[@<span class="number">0.3</span>,@<span class="number">0.6</span>,@<span class="number">0.1</span>];  </span><br><span class="line">    <span class="keyword">self</span>.angleArr = [[<span class="built_in">NSMutableArray</span> alloc] initWithCapacity:<span class="keyword">self</span>.percentArr.count];  </span><br><span class="line">    <span class="keyword">self</span>.midAngleArr = [[<span class="built_in">NSMutableArray</span> alloc] initWithCapacity:<span class="keyword">self</span>.percentArr.count];  </span><br><span class="line">    <span class="keyword">float</span> sumAngle = <span class="number">0.0</span>; </span><br><span class="line"><span class="comment">//é€šè¿‡ç™¾åˆ†æ¯”è½¬æ¢æˆå¼§åº¦  </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">self</span>.percentArr.count; i++) &#123;  </span><br><span class="line">        <span class="built_in">CGFloat</span> angle = [<span class="keyword">self</span>.percentArr[i] floatValue]*<span class="number">2</span>*M_PI;  </span><br><span class="line">        <span class="built_in">CGFloat</span> midAngle = sumAngle + angle/<span class="number">2.0</span>;  </span><br><span class="line">        [<span class="keyword">self</span>.midAngleArr addObject:[<span class="built_in">NSNumber</span> numberWithFloat:midAngle]];  </span><br><span class="line">        sumAngle += angle;  </span><br><span class="line">        [<span class="keyword">self</span>.angleArr addObject:[<span class="built_in">NSNumber</span> numberWithFloat:sumAngle]];  </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// Only override drawRect: if you perform custom drawing.  </span></span><br><span class="line"><span class="comment">// An empty implementation adversely affects performance during animation.  </span></span><br><span class="line">- (<span class="keyword">void</span>)drawRect:(<span class="built_in">CGRect</span>)rect &#123;  </span><br><span class="line">    <span class="comment">//ç»˜åˆ¶å¤–åœ†å¡«å……ç»¿è‰²  </span></span><br><span class="line">    <span class="built_in">CGContextRef</span> context = <span class="built_in">UIGraphicsGetCurrentContext</span>();  </span><br><span class="line">    <span class="built_in">CGContextSetFillColorWithColor</span>(context, [<span class="built_in">UIColor</span> greenColor].CGColor);  </span><br><span class="line">    <span class="built_in">CGContextAddArc</span>(context, kScreenWidth/<span class="number">2</span>, <span class="number">150</span>, OUTR, <span class="number">0</span>, <span class="number">2</span>*M_PI, <span class="number">0</span>);  </span><br><span class="line">    <span class="built_in">CGContextFillPath</span>(context);  </span><br><span class="line">      </span><br><span class="line">    <span class="comment">//ç»˜åˆ¶å¤–åœ†è®¾ç½®é¢œè‰²ä¸ºç™½è‰²  </span></span><br><span class="line">    <span class="built_in">CGContextSetLineWidth</span>(context, <span class="number">2</span>);  </span><br><span class="line">    <span class="built_in">CGContextSetStrokeColorWithColor</span>(context, [<span class="built_in">UIColor</span> whiteColor].CGColor);  </span><br><span class="line">    <span class="built_in">CGContextAddArc</span>(context, PIECENTERX, PIECENTERY, OUTR, <span class="number">0</span>, <span class="number">2</span>*M_PI, <span class="number">0</span>);  </span><br><span class="line">    <span class="built_in">CGContextStrokePath</span>(context);  </span><br><span class="line">      </span><br><span class="line">    <span class="comment">//ç»˜åˆ¶å†…åœ†å¡«å……è‰²ä¸ºæ©™è‰²  </span></span><br><span class="line">    <span class="built_in">CGContextSetFillColorWithColor</span>(context, [<span class="built_in">UIColor</span> orangeColor].CGColor);  </span><br><span class="line">    <span class="built_in">CGContextAddArc</span>(context, PIECENTERX, PIECENTERY, INR, <span class="number">0</span>, <span class="number">2</span>*M_PI, <span class="number">0</span>);  </span><br><span class="line">    <span class="built_in">CGContextFillPath</span>(context);  </span><br><span class="line">      </span><br><span class="line">    <span class="comment">//ç»˜åˆ¶å†…åœ†é¢œè‰²ä¸ºç™½è‰²  </span></span><br><span class="line">    <span class="built_in">CGContextSetLineWidth</span>(context, <span class="number">2</span>);  </span><br><span class="line">    <span class="built_in">CGContextAddArc</span>(context, PIECENTERX, PIECENTERY, INR, <span class="number">0</span>, <span class="number">2</span>*M_PI, <span class="number">0</span>);  </span><br><span class="line">    <span class="built_in">CGContextSetStrokeColorWithColor</span>(context, [<span class="built_in">UIColor</span> whiteColor].CGColor);  </span><br><span class="line">    <span class="built_in">CGContextStrokePath</span>(context);  </span><br><span class="line">      </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">self</span>.angleArr.count; i++) &#123;  </span><br><span class="line">          </span><br><span class="line">        <span class="comment">//æ ¹æ®å¼§åº¦ç®—å†…åˆ†å‰²çš„çº¿çš„èµ·å§‹ç‚¹  </span></span><br><span class="line">        <span class="built_in">CGFloat</span> angle = [<span class="keyword">self</span>.angleArr[i] floatValue];  </span><br><span class="line">        <span class="built_in">CGPoint</span> inPoint = <span class="built_in">CGPointMake</span>(PIECENTERX+INR*cos(angle), PIECENTERY+INR*sin(angle));  </span><br><span class="line">        <span class="built_in">CGPoint</span> outPoint = <span class="built_in">CGPointMake</span>(PIECENTERX+OUTR*cos(angle), PIECENTERY+OUTR*sin(angle));  </span><br><span class="line">          </span><br><span class="line">        <span class="comment">//è¿æ¥èµ·å§‹ç‚¹  </span></span><br><span class="line">        <span class="built_in">CGContextSetLineWidth</span>(context, <span class="number">2.0</span>);  </span><br><span class="line">        <span class="built_in">CGContextSetStrokeColorWithColor</span>(context, [<span class="built_in">UIColor</span> whiteColor].CGColor);  </span><br><span class="line">        <span class="built_in">CGContextMoveToPoint</span>(context, inPoint.x, inPoint.y);  </span><br><span class="line">        <span class="built_in">CGContextAddLineToPoint</span>(context, outPoint.x, outPoint.y);  </span><br><span class="line">        <span class="built_in">CGContextStrokePath</span>(context);  </span><br><span class="line">          </span><br><span class="line">        <span class="comment">//ç®—æ¯ä¸ªåˆ†æ®µå¼§åº¦çš„ä¸­å¿ƒç‚¹ä½ç½®  </span></span><br><span class="line">        <span class="built_in">CGFloat</span> midAngel = [<span class="keyword">self</span>.midAngleArr[i] floatValue];  </span><br><span class="line">        <span class="built_in">CGPoint</span> midPoint = <span class="built_in">CGPointMake</span>(PIECENTERX+(INR+OUTR)/<span class="number">2.0</span>*cos(midAngel), PIECENTERY+(INR+OUTR)/<span class="number">2.0</span>*sin(midAngel));  </span><br><span class="line">          </span><br><span class="line"><span class="comment">//        CGContextSetFillColorWithColor(context, [UIColor whiteColor].CGColor);  </span></span><br><span class="line"><span class="comment">//        CGContextAddArc(context, midPoint.x, midPoint.y, 3, 0, 2*M_PI, 0);  </span></span><br><span class="line"><span class="comment">//        CGContextFillPath(context);  </span></span><br><span class="line">          </span><br><span class="line">        <span class="comment">//æ¯ä¸ªåˆ†æ®µå»¶ä¼¸å‡ºå»çš„æŠ˜ç‚¹  </span></span><br><span class="line">        <span class="built_in">CGPoint</span> breakPoint = <span class="built_in">CGPointMake</span>(PIECENTERX+(OUTR+(OUTR-INR)/<span class="number">2.0</span>)*cos(midAngel), PIECENTERY+(OUTR+(OUTR-INR)/<span class="number">2.0</span>)*sin(midAngel));  </span><br><span class="line"><span class="comment">//        CGContextSetFillColorWithColor(context, [UIColor whiteColor].CGColor);  </span></span><br><span class="line"><span class="comment">//        CGContextAddArc(context, breakPoint.x, breakPoint.y, 3, 0, 2*M_PI, 0);  </span></span><br><span class="line"><span class="comment">//        CGContextFillPath(context);  </span></span><br><span class="line">          </span><br><span class="line">        <span class="comment">//ç»“æŸç‚¹çš„ä½ç½®ï¼Œç¡®å®šè¯´æ˜æ–‡æœ¬çš„æ”¾ç½®ä½ç½®  </span></span><br><span class="line">        <span class="built_in">CGPoint</span> endPoint;  </span><br><span class="line">        <span class="keyword">if</span> (breakPoint.x&lt;PIECENTERX) &#123;  </span><br><span class="line">            endPoint = <span class="built_in">CGPointMake</span>(<span class="number">43</span>, breakPoint.y);  </span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;  </span><br><span class="line">            endPoint = <span class="built_in">CGPointMake</span>(kScreenWidth<span class="number">-43</span>, breakPoint.y);  </span><br><span class="line">        &#125;  </span><br><span class="line">  </span><br><span class="line">        <span class="comment">//ç»“æŸç‚¹ç”»åœˆï¼Œå¡«å……ç™½è‰²  </span></span><br><span class="line">        <span class="built_in">CGContextSetFillColorWithColor</span>(context, [<span class="built_in">UIColor</span> whiteColor].CGColor);  </span><br><span class="line">        <span class="built_in">CGContextAddArc</span>(context, endPoint.x, endPoint.y, <span class="number">3</span>, <span class="number">0</span>, <span class="number">2</span>*M_PI, <span class="number">0</span>);  </span><br><span class="line">        <span class="built_in">CGContextFillPath</span>(context);  </span><br><span class="line">          </span><br><span class="line">        <span class="comment">//å°†ä¸­å¿ƒç‚¹ã€æŠ˜ç‚¹ã€ç»“æŸç‚¹è¿æ¥èµ·æ¥  </span></span><br><span class="line">        <span class="built_in">CGContextSetLineWidth</span>(context, <span class="number">2.0</span>);  </span><br><span class="line">        <span class="built_in">CGContextSetStrokeColorWithColor</span>(context, [<span class="built_in">UIColor</span> whiteColor].CGColor);  </span><br><span class="line">        <span class="built_in">CGContextMoveToPoint</span>(context, midPoint.x, midPoint.y);  </span><br><span class="line">        <span class="built_in">CGContextAddLineToPoint</span>(context, breakPoint.x, breakPoint.y);  </span><br><span class="line">        <span class="built_in">CGContextAddLineToPoint</span>(context, endPoint.x, endPoint.y);  </span><br><span class="line">        <span class="built_in">CGContextSetLineCap</span>(context, kCGLineCapRound);  </span><br><span class="line">        <span class="built_in">CGContextStrokePath</span>(context);  </span><br><span class="line">          </span><br><span class="line"><span class="comment">//        CGContextSetLineWidth(context, 2.0f);  </span></span><br><span class="line"><span class="comment">//        CGContextSetStrokeColorWithColor(context, [UIColor whiteColor].CGColor);  </span></span><br><span class="line"><span class="comment">//        CGContextMoveToPoint(context, midPoint.x, midPoint.y);  </span></span><br><span class="line"><span class="comment">//        CGContextSetLineCap(context, kCGLineCapRound);  </span></span><br><span class="line"><span class="comment">//        CGContextAddLineToPoint(context, breakPoint.x, breakPoint.y);  </span></span><br><span class="line"><span class="comment">//        CGContextStrokePath(context);  </span></span><br><span class="line">          </span><br><span class="line">        <span class="comment">//è°ƒæ•´è¯´æ˜æ§ä»¶çš„ä¸­å¿ƒä½ç½®  </span></span><br><span class="line">        <span class="built_in">UILabel</span> *label = (<span class="built_in">UILabel</span> *)[<span class="keyword">self</span> viewWithTag:LABELTAG+i];  </span><br><span class="line">        label.center = <span class="built_in">CGPointMake</span>(endPoint.x, endPoint.y+<span class="number">30</span>);  </span><br><span class="line">          </span><br><span class="line">    &#125;  </span><br><span class="line">      </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>æœ€ç»ˆæ•ˆæœå›¾ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/3603263-d8c13c03a02f7d91.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="20150914150016735.jpeg"></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> App </tag>
            
            <tag> UI </tag>
            
            <tag> OC </tag>
            
            <tag> ä¸‰è§’å‡½æ•° </tag>
            
            <tag> åœ† </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
